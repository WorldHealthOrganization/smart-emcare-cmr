map 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureMap/emcare.b24.malariatest' = 'emcare.b24.malariatest'
uses 'http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaireresponse' alias 'questionnaireResponse' as source
uses 'http://hl7.org/fhir/StructureDefinition/Bundle' alias 'Bundle' as target
uses 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/observation' alias 'Observation' as target
uses 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareobservation' alias 'EmCare Observation' as produced
group bundletrans(source src : questionnaireResponse,target bundle : Bundle){
    src -> bundle.id = uuid() 'id';
    src -> bundle.type = 'batch' 'type';
    src.item first as item  where linkId = 'EmCare.B24.DE07' and answer.exists() then {
        src -> bundle.entry as entry  then {
            src -> entry.request as request, request.method = 'POST' , uuid() as uuid, request.url = append('/Observation/', uuid) 'b50ac4c5';
            src -> entry.resource = create('Observation') as tgt then {
                src -> tgt then emcareobservationemcareb24de07(src, tgt) '0aea389d';
            } '6c2de021';
        } 'a6b0ceab';
    } '203cf17e';
    src.item first as item  where linkId = 'EmCare.B.H.DE24' and answer.exists() then {
        src -> bundle.entry as entry  then {
            src -> entry.request as request, request.method = 'POST' , uuid() as uuid, request.url = append('/Observation/', uuid) 'b50ac4c5';
            src -> entry.resource = create('Observation') as tgt then {
                src -> tgt then emcareobservationemcarebhde24(src, tgt) '02e804d7';
            } '6ab79d77';
        } '44eb8af1';
    } 'b0182ad3';
}

